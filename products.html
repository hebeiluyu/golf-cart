<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Products | Luyu Electric Vehicles</title>
  <meta name="description" content="Electric golf carts, electric mini buses, and utility vehicles (UTV). OEM/CKD support, export-ready manufacturing, factory direct supply, customization and fast quotation." />
  <link rel="canonical" href="https://luyuevcart.com/products.html" />

  <style>
    :root{
      --bg:#f6fbf7;
      --card:#ffffff;
      --line:#e4efe7;
      --text:#0f1f15;
      --muted:#4a6155;
      --green:#1bb36b;
      --green2:#11a35f;
      --greenSoft:#e9f7ef;
      --shadow: 0 10px 30px rgba(12, 34, 22, .08);
      --radius:18px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(180deg, #eef9f1 0%, var(--bg) 40%, #ffffff 100%);
      color:var(--text);
    }
    a{ color:inherit; text-decoration:none; }

    /* ✅ lock background when modal open */
    body.modal-open{
      overflow:hidden;
      height:100%;
      touch-action:none;
    }

    .container{ width:min(1160px, 92vw); margin:0 auto; }

    /* Header */
    .topbar{
      position:sticky; top:0; z-index:20;
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--line);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 0;
      gap:14px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:900;
      letter-spacing:.2px;
      min-width: 220px;
    }
    .logo-img{
      height: 30px;
      width: auto;
      display:block;
      object-fit:contain;
    }
    .menu{
      display:flex; gap:22px; align-items:center;
      font-weight:600; color:var(--muted);
    }
    .menu a{ padding:8px 10px; border-radius:10px; }
    .menu a:hover{ background: var(--greenSoft); color:#0d2b1c; }

    .cta{ display:flex; gap:10px; align-items:center; }
    .btn{
      border:1px solid var(--line);
      background:#fff;
      padding:10px 14px;
      border-radius:12px;
      font-weight:700;
      cursor:pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,.05);
      transition:.18s transform, .18s box-shadow, .18s background;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 10px 20px rgba(0,0,0,.08); }
    .btn.primary{
      background: linear-gradient(180deg, #22c978 0%, var(--green2) 100%);
      border:0; color:#fff;
    }
    .btn.small{ padding:9px 12px; border-radius:12px; font-weight:900; }

    /* Page head */
    .hero{ padding:26px 0 12px; }
    .hero h1{
      margin:0 0 8px;
      font-size: clamp(24px, 3.2vw, 34px);
      letter-spacing:.2px;
    }
    .hero p{ margin:0; color:var(--muted); line-height:1.6; }

    /* Tabs */
    .tabs{
      margin:18px 0 18px;
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .tab{
      padding:10px 14px;
      border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      font-weight:800;
      color:#1b3a2a;
      cursor:pointer;
      transition:.18s transform,.18s background,.18s box-shadow;
      box-shadow: 0 8px 18px rgba(0,0,0,.05);
    }
    .tab:hover{ transform: translateY(-1px); background: var(--greenSoft); }
    .tab.active{
      background: linear-gradient(180deg,#24cc7a 0%, #14a762 100%);
      color:#fff;
      border-color: transparent;
    }

    section{ scroll-margin-top:90px; padding:18px 0 8px; }
    .sectionHead{
      display:flex; align-items:flex-end; justify-content:space-between; gap:14px;
      margin:8px 0 14px;
    }
    .sectionHead h2{ margin:0; font-size:22px; }

    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:14px;
      margin-bottom:16px;
    }
    .card{
      grid-column: span 6;
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      transition:.18s transform, .18s box-shadow;
    }
    .card:hover{ transform: translateY(-2px); box-shadow: 0 16px 38px rgba(12,34,22,.12); }
    .cardMedia{
  height:160px;
  overflow:hidden;
  border-bottom:1px solid var(--line);
  background:#eaf7ef;
  display:block;
}

.cardMedia img{
  width:100%;
  height:100%;
  display:block;
  object-fit:cover;
  object-position:center;
}
    .cardBody{ padding:14px; }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      background: var(--greenSoft);
      color:#0d3a24;
      border:1px solid #cfeedd;
      padding:7px 10px;
      border-radius:999px;
      font-weight:800;
      font-size:13px;
    }
    .dot{
      width:9px;height:9px;border-radius:50%;
      background: var(--green);
      box-shadow: 0 0 0 4px rgba(27,179,107,.18);
    }
    .cardTitle{ margin:10px 0 6px; font-size:18px; font-weight:900; }
    .cardDesc{ margin:0 0 12px; color:var(--muted); line-height:1.55; min-height:46px; }
    .cardActions{ display:flex; gap:10px; flex-wrap:wrap; }

    .utvGrid .card{ grid-column: span 4; }
    .utvGrid .cardMedia{ height:140px; overflow:hidden; }

    .footer{
      margin-top:22px;
      padding:18px 0 28px;
      border-top:1px solid var(--line);
      color:var(--muted);
      font-size:14px;
    }

    /* ---------------- Modal ---------------- */
    .modalOverlay{
      position:fixed; inset:0;
      background: rgba(10, 22, 15, .42);
      display:none;
      z-index:100;
      padding:18px;
    }
    .modalOverlay.open{
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .modal{
      width:min(1100px, 96vw);
      height: min(84vh, 760px);
      background: #f7fbf8;
      border:1px solid rgba(255,255,255,.55);
      border-radius: 22px;
      box-shadow: 0 30px 80px rgba(0,0,0,.25);
      overflow:hidden;
      display:grid;
      grid-template-columns: 360px 1fr;
    }

    .modalLeft{
      background:#ffffff;
      border-right:1px solid var(--line);
      padding:16px;
      display:flex;
      flex-direction:column;
      gap:12px;
      min-height:0;
    }
    .modalTitleRow{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .modalTitle{ font-weight:1000; font-size:18px; margin:0; }
    .closeBtn{
      border:1px solid var(--line);
      background:#fff;
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:900;
    }
    .panel{
      background: var(--greenSoft);
      border:1px solid #cfeedd;
      border-radius:16px;
      padding:12px;
    }
    .panel h4{ margin:0 0 6px; font-size:13px; color:#0f3b25; }
    .panel .big{ font-size:26px; font-weight:1000; color:#0e2a1c; }
    .muted{ color:var(--muted); font-size:13px; line-height:1.45; }

    .modalRight{
      min-height:0;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      padding:16px;
      background: linear-gradient(180deg, #f6fbf7 0%, #ffffff 55%);
      overscroll-behavior: contain;
    }

    .group{
      margin-bottom:14px;
      background:#fff;
      border:1px solid var(--line);
      border-radius:16px;
      overflow:hidden;
    }
    .groupHead{
      padding:12px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      background:#f3faf6;
      border-bottom:1px solid var(--line);
    }
    .groupHead strong{ font-size:14px; }
    .options{
      padding:10px 12px 12px;
      display:flex; flex-direction:column; gap:10px;
    }
    .opt{
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px;
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      background:#fff;
      transition:.18s transform,.18s box-shadow;
    }
    .opt:hover{ transform: translateY(-1px); box-shadow: 0 10px 18px rgba(0,0,0,.06); }
    .optLeft{ display:flex; gap:12px; align-items:center; }
    .optText{ display:flex; flex-direction:column; gap:2px; }
    .optText b{ font-size:14px; }
    .optText span{ font-size:12px; color:var(--muted); }
    .optRight{
      display:flex; align-items:center; gap:12px;
      min-width:140px;
      justify-content:flex-end;
    }
    .priceTag{ font-weight:1000; color:#0e2a1c; }
    .radio{
      width:18px; height:18px; border-radius:50%;
      border:2px solid #b8d9c7;
      display:inline-block;
      position:relative;
      flex:0 0 auto;
    }
    .radio.on{ border-color: var(--green); }
    .radio.on:after{
      content:"";
      position:absolute; inset:3px;
      background: var(--green);
      border-radius:50%;
    }

    .modalBottom{
      position:sticky;
      bottom:0;
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(8px);
      border-top:1px solid var(--line);
      padding:12px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      border-radius: 0 0 16px 16px;
      margin-top:14px;
    }
    .totalLine{ font-weight:1000; color:#0e2a1c; }
    .bottomBtns{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

    @media (max-width: 920px){
      .card{ grid-column: span 12; }
      .utvGrid .card{ grid-column: span 12; }
      .modal{ grid-template-columns: 1fr; }
      .modalLeft{ border-right:0; border-bottom:1px solid var(--line); }
      .menu{ display:none; }
    }
  </style>
</head>

<body>
  <!-- Header -->
  <div class="topbar">
    <div class="container">
      <div class="nav">
        <a class="brand" href="index.html" aria-label="Luyu Electric Vehicles Home">
          <img src="images/logo.png" alt="Luyu Electric Vehicles Logo" class="logo-img">
          <div>Luyu Electric Vehicles</div>
        </a>

        <div class="menu">
          <a href="index.html">Home</a>
          <a href="products.html" style="color:#0f1f15;font-weight:900;">Products</a>
          <a href="oem.html">OEM &amp; Custom</a>
          <a href="about.html">About Us</a>
          <a href="contact.html">Contact</a>
        </div>

        <div class="cta">
          <a class="btn primary" target="_blank" rel="noopener"
             href="https://wa.me/8613485306254?text=Hello%20Luyu%2C%20I%20would%20like%20a%20quote%20for%20EV%20vehicles.">
            WhatsApp
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Page -->
  <div class="container">
    <div class="hero">
      <h1>Products</h1>
      <p>Electric golf carts, electric mini buses, and utility vehicles (UTV). OEM/CKD supported. Factory direct and export-ready.</p>
    </div>

    <!-- Tabs -->
    <div class="tabs" id="tabs">
      <button class="tab active" data-target="golf">Electric Golf Carts</button>
      <button class="tab" data-target="bus">Electric Mini Buses</button>
      <button class="tab" data-target="utv">Utility Vehicles (UTV)</button>
    </div>

    <!-- Golf -->
    <section id="golf">
      <div class="sectionHead">
        <h2>Electric Golf Carts</h2>
      </div>

      <div class="grid">
        <div class="card">
          <div class="cardMedia">
  <img src="images/golf-package-a.jpg" alt="EV Golf Cart Package A" style="width:100%;height:100%;object-fit:cover;">
</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> EV Golf Cart - Package A</span>
            <div class="cardTitle">EV Golf Cart - Package A</div>
            <p class="cardDesc">For golf courses, resorts, and communities. OEM/CKD supported. Export-ready.</p>
            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('golf','A')">Details / Order</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardMedia">
  <img src="images/golf-package-b.jpg" alt="EV Golf Cart Package A" style="width:100%;height:100%;object-fit:cover;">
</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> EV Golf Cart - Package B</span>
            <div class="cardTitle">EV Golf Cart - Package B</div>
            <p class="cardDesc">Best value package for bulk orders and customization upgrades.</p>
            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('golf','B')">Details / Order</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardMedia">
  <img src="images/golf-package-c.jpg" alt="EV Golf Cart Package A" style="width:100%;height:100%;object-fit:cover;">
</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> EV Golf Cart - Package C</span>
            <div class="cardTitle">EV Golf Cart - Package C</div>
            <p class="cardDesc">Premium options and more upgrade space for comfort and features.</p>
            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('golf','C')">Details / Order</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardMedia">
  <img src="images/golf-package-d.jpg" alt="EV Golf Cart Package A" style="width:100%;height:100%;object-fit:cover;">
</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> EV Golf Cart - Package D</span>
            <div class="cardTitle">EV Golf Cart - Package D</div>
            <p class="cardDesc">Stronger motor and off-road tire upgrades for tougher conditions.</p>
            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('golf','D')">Details / Order</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Mini bus -->
    <section id="bus">
      <div class="sectionHead">
        <h2>Electric Mini Buses</h2>
      </div>

      <div class="grid">
        <div class="card">
          <div class="cardMedia">
  <img src="images/mini-bus-a.jpg" alt="Electric Mini Bus Package A">
</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> Electric Mini Bus - Package A</span>
            <div class="cardTitle">Electric Mini Bus - Package A</div>
            <p class="cardDesc">For hotels, campuses, and shuttle services. Multiple seat options supported.</p>
            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('bus','A')">Details / Order</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardMedia">
  <img src="images/mini-bus-b.jpg" alt="Electric Mini Bus Package A">
</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> Electric Mini Bus - Package B</span>
            <div class="cardTitle">Electric Mini Bus - Package B</div>
            <p class="cardDesc">More configuration combinations: open/closed, motor upgrades, export ready.</p>
            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('bus','B')">Details / Order</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- UTV -->
    <section id="utv">
      <div class="sectionHead">
        <h2>Utility Vehicles (UTV)</h2>
      </div>

      <div class="grid utvGrid">
        <div class="card">
  <div class="cardMedia">
    <img src="images/utv-1.jpg" alt="Utility Vehicle (UTV Model 1)">
  </div>
  <div class="cardBody">
            <div class="cardTitle">Utility Vehicle (UTV)</div>
            <p class="cardDesc">For warehouses, parks, maintenance, and cargo transport. OEM available.</p>
          </div>
        </div>
        <div class="card">
  <div class="cardMedia">
    <img src="images/utv-2.jpg" alt="Utility Vehicle (UTV Model 2)">
  </div>
  <div class="cardBody">
            <div class="cardTitle">Utility Vehicle (UTV)</div>
            <p class="cardDesc">Cargo box, reinforced frame, lighting and more options can be customized.</p>
          </div>
        </div>
        <div class="card">
  <div class="cardMedia">
    <img src="images/utv-3.jpg" alt="Utility Vehicle (UTV Model 3)">
  </div>
  <div class="cardBody">
            <div class="cardTitle">Utility Vehicle (UTV)</div>
            <p class="cardDesc">Bulk orders supported. Export documents and container loading support.</p>
          </div>
        </div>
      </div>
    </section>

    <div class="footer">
      © 2026 Luyu Electric Vehicles. Email: carol@luyuevcart.com | WhatsApp: +86 134 8530 6254
    </div>
  </div>

  <!-- Modal -->
  <div class="modalOverlay" id="modal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modalLeft">
        <div class="modalTitleRow">
          <h3 class="modalTitle" id="modalTitle">Configuration</h3>
          <button class="closeBtn" onclick="closeModal()">Close</button>
        </div>

        <div class="panel">
          <h4>Base Price (Reference)</h4>
          <div class="big" id="basePriceText">From $****</div>
          <div class="muted">USD price is for reference only. Final price depends on configuration and destination.</div>
        </div>

        <div class="panel">
          <h4>Current Total (Reference)</h4>
          <div class="big" id="totalPriceText">$0</div>
          <div class="muted">Click “Shipping / Get Quote” to send your selections via WhatsApp.</div>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <a class="btn primary" id="whBtn" target="_blank" rel="noopener"
             href="https://wa.me/8613485306254?text=Hello%20Luyu%2C%20I%20would%20like%20a%20quote.">
            Shipping / Get Quote (WhatsApp)
          </a>
          <button class="btn" onclick="resetChoices()">Reset</button>
        </div>
      </div>

      <div class="modalRight" id="modalRight">
        <div id="formMount"></div>

        <div class="modalBottom">
          <div class="totalLine">Total (Reference): <span id="stickyTotal">$0</span></div>
          <div class="bottomBtns">
            <a class="btn primary" id="whBtn2" target="_blank" rel="noopener"
               href="https://wa.me/8613485306254?text=Hello%20Luyu%2C%20I%20would%20like%20a%20quote.">
              Shipping / Get Quote
            </a>
            <button class="btn" onclick="closeModal()">Close</button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    /* Tabs scroll */
    const tabs = document.querySelectorAll(".tab");
    tabs.forEach(t=>{
      t.addEventListener("click", ()=>{
        tabs.forEach(x=>x.classList.remove("active"));
        t.classList.add("active");
        const id = t.dataset.target;
        document.getElementById(id).scrollIntoView({behavior:"smooth", block:"start"});
      })
    });

    /* =========================
       Data (edit later)
       ========================= */

    const BASE_GOLF = [
      "3.5kW motor",
      "Motor: Depuda",
      "Controller: Inbol",
      "Front McPherson independent suspension",
      "Rear torsion beam floating rear axle",
      "One-piece acrylic windshield",
      "Integrated chassis beam",
      "Full steel frame structure",
      "Injection-molded body",
      "10-inch steel wheel rim",
      "40V 100Ah lead-acid battery",
      "Grass tires",
      "Accordion-style accelerator pedal",
      "Anti-rust treatment: electrophoresis + hardened powder coating"
    ];

    const GOLF_SEAT = [
      { id:"std", label:"Standard seat layout", add:null },
      { id:"front_row", label:"Add one row (front)", add:null },
      { id:"rear_row", label:"Add one row (rear)", add:null }
    ];

    const GOLF_BATTERY = [
      { id:"b48_100", label:"48V 100Ah", add:null },
      { id:"b60_100", label:"60V 100Ah", add:null },
      { id:"b72_100", label:"72V 100Ah", add:null },
      { id:"b48_150", label:"48V 150Ah", add:null },
      { id:"b72_150", label:"72V 150Ah", add:null },
      { id:"b48_200", label:"48V 200Ah", add:null },
      { id:"b60_200", label:"60V 200Ah", add:null },
      { id:"b72_200", label:"72V 200Ah", add:null }
    ];

    const GOLF_SCREEN = [
      { id:"screen9", label:"9-inch multimedia screen", add:null },
      { id:"screen101", label:"10.1-inch multimedia screen + CarPlay", add:null }
    ];

    const GOLF_TIRE = [
      { id:"t10", label:"10-inch alloy wheel + off-road tire", add:null },
      { id:"t12", label:"12-inch alloy wheel + off-road tire", add:null },
      { id:"t14", label:"14-inch alloy wheel + off-road tire", add:null }
    ];

    const GOLF_MOTOR = [
      { id:"m4", label:"4000W motor", add:null },
      { id:"m5", label:"5000W motor", add:null },
      { id:"m75", label:"7500W motor", add:null }
    ];

    const GOLF_OPTIONAL_LIST = [
      "Front bumper",
      "Footstep board (one row)",
      "Front cargo rack",
      "Rear cargo rack",
      "Foldable windshield",
      "Slim foldable windshield",
      "Tempered glass + wiper",
      "Tow hook",
      "Luxury seat (per row)",
      "Fridge",
      "Golf bag rack",
      "Golf ball washer",
      "Integrated accelerator + brake pedal",
      "Wireless charging",
      "Curtis controller + KDS motor",
      "4-inch colorful speakers (1 pair)",
      "6-inch colorful speakers (1 pair)",
      "Sound bar",
      "Double wishbone suspension",
      "Carbon fiber dashboard",
      "Four-wheel disc brakes",
      "Electronic parking brake",
      "Roof long light bar",
      "Solar panel",
      "Golf bag rain curtain",
      "Roof luggage rack",
      "Chassis lights",
      "Roof ambient lights (per row)"
    ];

    const GOLF_FREEBIES = [
      "Logo design",
      "Free body color customization",
      "Local standard charger",
      "Golf balls",
      "Spare switches & wearable parts"
    ];

    const BUS_BASE = [
      "4kW motor",
      "Multimedia + rear-view camera",
      "Front McPherson independent suspension",
      "Rear integrated rear axle",
      "Integrated chassis beam",
      "Full steel frame structure"
    ];

    const BUS_SEATS = [
      { id:"8", label:"8 seats (standard)", add:null },
      { id:"11", label:"11 seats", add:null },
      { id:"14", label:"14 seats", add:null },
      { id:"17", label:"17 seats", add:null },
      { id:"20", label:"20 seats", add:null },
      { id:"23", label:"23 seats (max)", add:null }
    ];

    const BUS_OPTIONAL_LIST = [
      "Add one row (3 seats) — up to 23 seats",
      "Warning light + siren speaker",
      "Fully enclosed (per row)",
      "Ceiling mounted air conditioner",
      "5000W motor",
      "7500W motor",
      "11kW motor",
      "Heavy-duty load rear axle"
    ];

    /* Pricing data (placeholders) */
    const PRICE = {
      golf: {
        base: { A: 0, B: 0, C: 0, D: 0 },
        baseConfig: BASE_GOLF,
        seats: GOLF_SEAT,
        upgrades: [
          { key:"battery", title:"Battery Options (Choose One)", items: GOLF_BATTERY },
          { key:"screen", title:"Multimedia Screen (Choose One)", items: GOLF_SCREEN },
          { key:"tire", title:"Tires & Wheels (Choose One)", items: GOLF_TIRE },
          { key:"motor", title:"Motor Upgrade (Choose One)", items: GOLF_MOTOR }
        ],
        optionList: GOLF_OPTIONAL_LIST,
        freebies: GOLF_FREEBIES
      },
      bus: {
        base: { A: 0, B: 0 },
        baseConfig: BUS_BASE,
        seats: BUS_SEATS,
        optionList: BUS_OPTIONAL_LIST,
        freebies: ["Free items: to be confirmed in quotation (placeholder)."]
      }
    };

    let currentType = "golf";
    let currentPkg = "B";

    const state = { seat:null, upgrades:{}, options:new Set() };

    /* Open / Close Modal */
    function openModal(type, pkg){
      currentType = type;
      currentPkg = pkg;
      resetChoices(false);

      const titleMap = {
        golf: `EV Golf Cart - Package ${pkg}`,
        bus: `Electric Mini Bus - Package ${pkg}`
      };
      document.getElementById("modalTitle").textContent = titleMap[type] || "Configuration";

      document.getElementById("basePriceText").textContent =
  "USD 3,200 – 4,200";

      buildForm(type);

      document.getElementById("modal").classList.add("open");
      document.getElementById("modal").setAttribute("aria-hidden","false");
      document.body.classList.add("modal-open");

      updateTotal();

      const sc = document.getElementById("modalRight");
      sc.scrollTop = 0;
    }

    function closeModal(){
      document.getElementById("modal").classList.remove("open");
      document.getElementById("modal").setAttribute("aria-hidden","true");
      document.body.classList.remove("modal-open");
    }

    document.getElementById("modal").addEventListener("click", (e)=>{
      if(e.target.id === "modal") closeModal();
    });

    /* Build Form */
    function buildForm(type){
      const mount = document.getElementById("formMount");
      mount.innerHTML = "";

      // Base configuration (same for all packages)
      mount.appendChild(makeListGroup("Base Configuration (Standard)", PRICE[type].baseConfig, false));

      // Seat options
      mount.appendChild(makeSingleChoiceGroup(
        "Seat Layout (Choose One)",
        PRICE[type].seats,
        (opt)=> { state.seat = opt; updateTotal(); }
      ));

      if(type === "golf"){
        // Upgrades groups
        (PRICE.golf.upgrades || []).forEach(g=>{
          mount.appendChild(makeSingleChoiceGroup(
            g.title,
            g.items,
            (opt)=> { state.upgrades[g.key] = opt; updateTotal(); }
          ));
        });

        // Optional list (no photos, no selectable price required)
        mount.appendChild(makeListGroup("Optional Items (Add-ons)", PRICE.golf.optionList, true));

        // Freebies kept
        mount.appendChild(makeListGroup("Free Items (Included)", PRICE.golf.freebies, true));
      }else{
        // Bus: optional list only (no “option/selection” wording)
        mount.appendChild(makeListGroup("Available Customization Items", PRICE.bus.optionList, true));
        mount.appendChild(makeListGroup("Free Items (Placeholder)", PRICE.bus.freebies, true));
      }
    }

    function formatAdd(add){
      if(add === null || typeof add === "undefined") return "+$****";
      return "+$" + Number(add || 0);
    }

    function makeSingleChoiceGroup(title, items, onPick){
      const wrap = document.createElement("div");
      wrap.className = "group";
      wrap.innerHTML = `
        <div class="groupHead">
          <strong>${title}</strong>
        </div>
        <div class="options"></div>
      `;
      const box = wrap.querySelector(".options");

      items.forEach((it, idx)=>{
        const row = document.createElement("div");
        row.className = "opt";
        row.innerHTML = `
          <div class="optLeft">
            <div class="optText">
              <b>${it.label}</b>
            </div>
          </div>
          <div class="optRight">
            <div class="priceTag">${formatAdd(it.add)}</div>
            <span class="radio"></span>
          </div>
        `;

        row.addEventListener("click", ()=>{
          box.querySelectorAll(".radio").forEach(r=>r.classList.remove("on"));
          row.querySelector(".radio").classList.add("on");
          onPick({ id: it.id, label: it.label, add: it.add });
        });

        if(idx === 0) setTimeout(()=>row.click(), 0);
        box.appendChild(row);
      });

      return wrap;
    }

    function makeListGroup(title, items, useDots){
      const wrap = document.createElement("div");
      wrap.className = "group";
      wrap.innerHTML = `
        <div class="groupHead">
          <strong>${title}</strong>
        </div>
        <div class="options" style="gap:8px;"></div>
      `;
      const box = wrap.querySelector(".options");

      items.forEach(t=>{
        const div = document.createElement("div");
        div.style.cssText = "padding:10px 12px;border:1px dashed #cfeedd;border-radius:14px;background:#fbfffd;color:#274a38;font-weight:700;";
        div.textContent = (useDots ? "• " : "") + t;
        box.appendChild(div);
      });
      return wrap;
    }

    /* Total + WhatsApp (reference only) */
    function updateTotal(){
      const type = currentType;
      const base = (PRICE[type].base[currentPkg] ?? 0);

      let total = base;
      // only numeric adds are counted; null means TBD
      if(state.seat && typeof state.seat.add === "number") total += state.seat.add;

      Object.values(state.upgrades).forEach(u=>{
        if(u && typeof u.add === "number") total += u.add;
      });

      const show = `$${total}`;
      document.getElementById("totalPriceText").textContent = show;
      document.getElementById("stickyTotal").textContent = show;

      const msg = buildWhatsAppMessage(type, base, total);
      const url = "https://wa.me/8613485306254?text=" + encodeURIComponent(msg);
      document.getElementById("whBtn").href = url;
      document.getElementById("whBtn2").href = url;
    }

    function buildWhatsAppMessage(type, base, total){
      const title = (type === "golf")
        ? `EV Golf Cart - Package ${currentPkg}`
        : `Electric Mini Bus - Package ${currentPkg}`;

      const lines = [];
      lines.push(`Hello Luyu, I would like a quote.`);
      lines.push(`Product: ${title}`);
      lines.push(`Base price: ${base>0?("$"+base):"$****"} (reference)`);

      if(state.seat) lines.push(`Seat layout: ${state.seat.label} (${state.seat.add===null?"+$****":("+$"+state.seat.add)})`);

      Object.entries(state.upgrades).forEach(([k,v])=>{
        if(v) lines.push(`Upgrade: ${v.label} (${v.add===null?"+$****":("+$"+v.add)})`);
      });

      lines.push(`Estimated total: $${total} (reference)`);
      lines.push(`Please advise shipping and final quotation.`);
      return lines.join("\n");
    }

    function resetChoices(recalc=true){
      state.seat = null;
      state.upgrades = {};
      state.options = new Set();
      if(recalc) updateTotal();
    }

    // If opened via hash
    if(location.hash){
      const id = location.hash.replace("#","");
      const el = document.getElementById(id);
      if(el) setTimeout(()=>el.scrollIntoView({behavior:"smooth"}), 100);
    }
  </script>
</body>
</html>
