<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Products | Luyu Electric Vehicles</title>
  <meta name="description" content="Electric golf carts, electric mini buses, and utility vehicles (UTV). OEM/CKD support, export-ready manufacturing, factory direct supply, customization and fast quotation." />
  <link rel="canonical" href="https://luyuevcart.com/products.html" />

  <style>
    :root{
      --bg:#f6fbf7;
      --card:#ffffff;
      --line:#e4efe7;
      --text:#0f1f15;
      --muted:#4a6155;
      --green:#1bb36b;
      --green2:#11a35f;
      --greenSoft:#e9f7ef;
      --shadow: 0 10px 30px rgba(12, 34, 22, .08);
      --radius:18px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(180deg, #eef9f1 0%, var(--bg) 40%, #ffffff 100%);
      color:var(--text);
    }
    a{ color:inherit; text-decoration:none; }

    /* ✅ lock background when modal open */
    body.modal-open{
      overflow:hidden;
      height:100%;
      touch-action:none;
    }

    .container{ width:min(1160px, 92vw); margin:0 auto; }

    /* Header */
    .topbar{
      position:sticky; top:0; z-index:20;
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--line);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 0;
      gap:14px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:800;
      letter-spacing:.2px;
    }
    .logo{
      width:34px; height:34px; border-radius:10px;
      background: radial-gradient(circle at 30% 30%, #baf2d5 0%, #54d89f 45%, #1bb36b 100%);
      border:1px solid #bfe8d2;
      box-shadow: 0 8px 18px rgba(27,179,107,.18);
      display:grid; place-items:center;
      color:#0b3a24; font-weight:900;
    }
    .menu{
      display:flex; gap:22px; align-items:center;
      font-weight:600; color:var(--muted);
    }
    .menu a{ padding:8px 10px; border-radius:10px; }
    .menu a:hover{ background: var(--greenSoft); color:#0d2b1c; }

    .cta{ display:flex; gap:10px; align-items:center; }
    .btn{
      border:1px solid var(--line);
      background:#fff;
      padding:10px 14px;
      border-radius:12px;
      font-weight:700;
      cursor:pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,.05);
      transition:.18s transform, .18s box-shadow, .18s background;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 10px 20px rgba(0,0,0,.08); }
    .btn.primary{
      background: linear-gradient(180deg, #22c978 0%, var(--green2) 100%);
      border:0; color:#fff;
    }
    .btn.small{ padding:9px 12px; border-radius:12px; font-weight:900; }

    /* Page head */
    .hero{ padding:26px 0 12px; }
    .hero h1{
      margin:0 0 8px;
      font-size: clamp(24px, 3.2vw, 34px);
      letter-spacing:.2px;
    }
    .hero p{ margin:0; color:var(--muted); line-height:1.6; }

    /* Tabs */
    .tabs{
      margin:18px 0 18px;
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .tab{
      padding:10px 14px;
      border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      font-weight:800;
      color:#1b3a2a;
      cursor:pointer;
      transition:.18s transform,.18s background,.18s box-shadow;
      box-shadow: 0 8px 18px rgba(0,0,0,.05);
    }
    .tab:hover{ transform: translateY(-1px); background: var(--greenSoft); }
    .tab.active{
      background: linear-gradient(180deg,#24cc7a 0%, #14a762 100%);
      color:#fff;
      border-color: transparent;
    }

    section{ scroll-margin-top:90px; padding:18px 0 8px; }
    .sectionHead{
      display:flex; align-items:flex-end; justify-content:space-between; gap:14px;
      margin:8px 0 14px;
    }
    .sectionHead h2{ margin:0; font-size:22px; }

    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:14px;
      margin-bottom:16px;
    }
    .card{
      grid-column: span 6;
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      transition:.18s transform, .18s box-shadow;
    }
    .card:hover{ transform: translateY(-2px); box-shadow: 0 16px 38px rgba(12,34,22,.12); }
    .cardMedia{
      height:160px;
      background:
        linear-gradient(120deg, rgba(27,179,107,.18), rgba(255,255,255,.0)),
        linear-gradient(180deg, #eaf7ef, #ffffff);
      display:flex; align-items:center; justify-content:center;
      color:#2b5a41; font-weight:800;
      text-align:center;
      padding:10px;
    }
    .cardBody{ padding:14px; }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      background: var(--greenSoft);
      color:#0d3a24;
      border:1px solid #cfeedd;
      padding:7px 10px;
      border-radius:999px;
      font-weight:800;
      font-size:13px;
    }
    .dot{
      width:9px;height:9px;border-radius:50%;
      background: var(--green);
      box-shadow: 0 0 0 4px rgba(27,179,107,.18);
    }
    .cardTitle{ margin:10px 0 6px; font-size:18px; font-weight:900; }
    .cardDesc{ margin:0 0 10px; color:var(--muted); line-height:1.55; min-height:46px; }

    /* price line */
    .priceRow{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      padding:10px 12px;
      border:1px dashed #cfeedd;
      border-radius:14px;
      background:#fbfffd;
      margin:10px 0 12px;
    }
    .priceRow span{
      color:var(--muted);
      font-weight:800;
      font-size:12px;
    }
    .priceRow strong{
      color:#0e2a1c;
      font-weight:1000;
      font-size:16px;
    }
    .noteTiny{
      font-size:12px;
      color:var(--muted);
      margin:-6px 0 12px;
      line-height:1.35;
    }

    .cardActions{ display:flex; gap:10px; flex-wrap:wrap; }

    .utvGrid .card{ grid-column: span 4; }
    .utvGrid .cardMedia{ height:140px; }

    .footer{
      margin-top:22px;
      padding:18px 0 28px;
      border-top:1px solid var(--line);
      color:var(--muted);
      font-size:14px;
    }

    /* ---------------- Modal ---------------- */
    .modalOverlay{
      position:fixed; inset:0;
      background: rgba(10, 22, 15, .42);
      display:none;
      z-index:100;
      padding:18px;
    }
    .modalOverlay.open{
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .modal{
      width:min(1100px, 96vw);
      height: min(84vh, 760px);
      background: #f7fbf8;
      border:1px solid rgba(255,255,255,.55);
      border-radius: 22px;
      box-shadow: 0 30px 80px rgba(0,0,0,.25);
      overflow:hidden;
      display:grid;
      grid-template-columns: 360px 1fr;
    }

    .modalLeft{
      background:#ffffff;
      border-right:1px solid var(--line);
      padding:16px;
      display:flex;
      flex-direction:column;
      gap:12px;
      min-height:0;
    }
    .modalTitleRow{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .modalTitle{ font-weight:1000; font-size:18px; margin:0; }
    .closeBtn{
      border:1px solid var(--line);
      background:#fff;
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:900;
    }
    .panel{
      background: var(--greenSoft);
      border:1px solid #cfeedd;
      border-radius:16px;
      padding:12px;
    }
    .panel h4{ margin:0 0 6px; font-size:13px; color:#0f3b25; }
    .panel .big{ font-size:26px; font-weight:1000; color:#0e2a1c; }
    .muted{ color:var(--muted); font-size:13px; line-height:1.45; }

    .modalRight{
      min-height:0;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      padding:16px;
      background: linear-gradient(180deg, #f6fbf7 0%, #ffffff 55%);
      overscroll-behavior: contain;
    }

    .group{
      margin-bottom:14px;
      background:#fff;
      border:1px solid var(--line);
      border-radius:16px;
      overflow:hidden;
    }
    .groupHead{
      padding:12px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      background:#f3faf6;
      border-bottom:1px solid var(--line);
    }
    .groupHead strong{ font-size:14px; }
    .hint{ font-size:12px; color:var(--muted); }

    .options{
      padding:10px 12px 12px;
      display:flex; flex-direction:column; gap:10px;
    }
    .opt{
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px;
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      background:#fff;
      transition:.18s transform,.18s box-shadow;
    }
    .opt:hover{ transform: translateY(-1px); box-shadow: 0 10px 18px rgba(0,0,0,.06); }
    .optLeft{ display:flex; gap:12px; align-items:center; }
    .optText{ display:flex; flex-direction:column; gap:2px; }
    .optText b{ font-size:14px; }
    .optText span{ font-size:12px; color:var(--muted); }
    .optRight{
      display:flex; align-items:center; gap:12px;
      min-width:140px;
      justify-content:flex-end;
    }
    .priceTag{ font-weight:1000; color:#0e2a1c; }
    .radio{
      width:18px; height:18px; border-radius:50%;
      border:2px solid #b8d9c7;
      display:inline-block;
      position:relative;
      flex:0 0 auto;
    }
    .radio.on{ border-color: var(--green); }
    .radio.on:after{
      content:"";
      position:absolute; inset:3px;
      background: var(--green);
      border-radius:50%;
    }

    .modalBottom{
      position:sticky;
      bottom:0;
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(8px);
      border-top:1px solid var(--line);
      padding:12px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      border-radius: 0 0 16px 16px;
      margin-top:14px;
    }
    .totalLine{ font-weight:1000; color:#0e2a1c; }
    .bottomBtns{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

    @media (max-width: 920px){
      .card{ grid-column: span 12; }
      .utvGrid .card{ grid-column: span 12; }
      .modal{ grid-template-columns: 1fr; }
      .modalLeft{ border-right:0; border-bottom:1px solid var(--line); }
    }
  </style>
</head>

<body>
  <!-- Header -->
  <div class="topbar">
    <div class="container">
      <div class="nav">
        <a class="brand" href="index.html">
          <div class="logo">LV</div>
          <div>Luyu Electric Vehicles</div>
        </a>

        <div class="menu">
          <a href="index.html">Home</a>
          <a href="products.html" style="color:#0f1f15;font-weight:900;">Products</a>
          <a href="oem.html">OEM &amp; Custom</a>
          <a href="about.html">About Us</a>
          <a href="contact.html">Contact</a>
        </div>

        <div class="cta">
          <a class="btn primary" target="_blank" rel="noopener"
             href="https://wa.me/8613485306254?text=Hello%20Luyu%2C%20I%20would%20like%20a%20quote%20for%20EV%20vehicles.">
            WhatsApp
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Page -->
  <div class="container">
    <div class="hero">
      <h1>Products</h1>
      <p>Electric golf carts, electric mini buses, and utility vehicles (UTV). OEM/CKD supported. Factory direct and export-ready.</p>
    </div>

    <!-- Tabs -->
    <div class="tabs" id="tabs">
      <button class="tab active" data-target="golf">Electric Golf Carts</button>
      <button class="tab" data-target="bus">Electric Mini Buses</button>
      <button class="tab" data-target="utv">Utility Vehicles (UTV)</button>
    </div>

    <!-- Golf -->
    <section id="golf">
      <div class="sectionHead">
        <h2>Electric Golf Carts</h2>
      </div>

      <div class="grid">
        <div class="card">
          <div class="cardMedia">(Placeholder Image) Package A</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> LX-Series Electric Golf Cart</span>
            <div class="cardTitle">LX-Series Electric Golf Cart – Package A (Standard OEM)</div>
            <p class="cardDesc">Factory-direct EV golf cart for golf courses, resorts and communities. OEM/CKD supported, export-ready packing.</p>

            <div class="priceRow">
              <span>Reference Price (USD)</span>
              <strong>$2,780</strong>
            </div>
            <p class="noteTiny">Final quotation depends on configuration, order quantity and destination.</p>

            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('golf','A')">Details / Order</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardMedia">(Placeholder Image) Package B</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> LX-Series Electric Golf Cart</span>
            <div class="cardTitle">LX-Series Electric Golf Cart – Package B (Value OEM)</div>
            <p class="cardDesc">Best-value package for distributor orders. Strong OEM upgrade space for battery, wheels, multimedia and accessories.</p>

            <div class="priceRow">
              <span>Reference Price (USD)</span>
              <strong>$4,620</strong>
            </div>
            <p class="noteTiny">Final quotation depends on configuration, order quantity and destination.</p>

            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('golf','B')">Details / Order</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardMedia">(Placeholder Image) Package C</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> LX-Series Electric Golf Cart</span>
            <div class="cardTitle">LX-Series Electric Golf Cart – Package C (Premium Comfort)</div>
            <p class="cardDesc">Premium comfort configuration with more upgrade options for features, interior and lighting. Suitable for resorts and private communities.</p>

            <div class="priceRow">
              <span>Reference Price (USD)</span>
              <strong>$3,530</strong>
            </div>
            <p class="noteTiny">Final quotation depends on configuration, order quantity and destination.</p>

            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('golf','C')">Details / Order</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardMedia">(Placeholder Image) Package D</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> LX-Series Electric Golf Cart</span>
            <div class="cardTitle">LX-Series Electric Golf Cart – Package D (High-Spec OEM)</div>
            <p class="cardDesc">High-spec configuration designed for large projects and advanced customization. Ideal for export distributors and tender projects.</p>

            <div class="priceRow">
              <span>Reference Price (USD)</span>
              <strong>$10,020</strong>
            </div>
            <p class="noteTiny">Final quotation depends on configuration, order quantity and destination.</p>

            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('golf','D')">Details / Order</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Mini bus -->
    <section id="bus">
      <div class="sectionHead">
        <h2>Electric Mini Buses</h2>
      </div>

      <div class="grid">
        <div class="card">
          <div class="cardMedia">(Placeholder Image) Mini Bus A</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> EV Mini Bus / Shuttle</span>
            <div class="cardTitle">E-Shuttle Mini Bus – Package A (Project Standard)</div>
            <p class="cardDesc">For hotels, campuses and shuttle services. Export-ready build with flexible seating and OEM support.</p>

            <div class="priceRow">
              <span>Reference Price (USD)</span>
              <strong>$3,320</strong>
            </div>
            <p class="noteTiny">Final quotation depends on seating, configuration and destination.</p>

            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('bus','A')">Details / Order</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardMedia">(Placeholder Image) Mini Bus B</div>
          <div class="cardBody">
            <span class="badge"><span class="dot"></span> EV Mini Bus / Shuttle</span>
            <div class="cardTitle">E-Shuttle Mini Bus – Package B (Enhanced OEM)</div>
            <p class="cardDesc">More configuration combinations for commercial shuttles: body type, motor upgrades and export packing supported.</p>

            <div class="priceRow">
              <span>Reference Price (USD)</span>
              <strong>$3,430</strong>
            </div>
            <p class="noteTiny">Final quotation depends on seating, configuration and destination.</p>

            <div class="cardActions">
              <button class="btn small primary" onclick="openModal('bus','B')">Details / Order</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- UTV -->
    <section id="utv">
      <div class="sectionHead">
        <h2>Utility Vehicles (UTV)</h2>
      </div>

      <div class="grid utvGrid">
        <div class="card">
          <div class="cardMedia">(Placeholder Image) UTV 1</div>
          <div class="cardBody">
            <div class="cardTitle">Utility Vehicle (UTV)</div>
            <p class="cardDesc">For warehouses, parks, maintenance, and cargo transport. OEM available.</p>
          </div>
        </div>
        <div class="card">
          <div class="cardMedia">(Placeholder Image) UTV 2</div>
          <div class="cardBody">
            <div class="cardTitle">Utility Vehicle (UTV)</div>
            <p class="cardDesc">Cargo box, reinforced frame, lighting and more options can be customized.</p>
          </div>
        </div>
        <div class="card">
          <div class="cardMedia">(Placeholder Image) UTV 3</div>
          <div class="cardBody">
            <div class="cardTitle">Utility Vehicle (UTV)</div>
            <p class="cardDesc">Bulk orders supported. Export documents and container loading support.</p>
          </div>
        </div>
      </div>
    </section>

    <div class="footer">
      © 2026 Luyu Electric Vehicles. Email: carol@luyuevcart.com | WhatsApp: +86 134 8530 6254
    </div>
  </div>

  <!-- Modal -->
  <div class="modalOverlay" id="modal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modalLeft">
        <div class="modalTitleRow">
          <h3 class="modalTitle" id="modalTitle">Configuration</h3>
          <button class="closeBtn" onclick="closeModal()">Close</button>
        </div>

        <div class="panel">
          <h4>Base Price (Reference)</h4>
          <div class="big" id="basePriceText">From $****</div>
          <div class="muted">USD price is for reference only. Final price depends on configuration and destination port.</div>
        </div>

        <div class="panel">
          <h4>Current Total (Reference)</h4>
          <div class="big" id="totalPriceText">$0</div>
          <div class="muted">Click “Shipping / Get Quote” to send your selections via WhatsApp.</div>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <a class="btn primary" id="whBtn" target="_blank" rel="noopener"
             href="https://wa.me/8613485306254?text=Hello%20Luyu%2C%20I%20would%20like%20a%20quote.">
            Shipping / Get Quote (WhatsApp)
          </a>
          <button class="btn" onclick="resetChoices()">Reset</button>
        </div>
      </div>

      <div class="modalRight" id="modalRight">
        <div id="formMount"></div>

        <div class="modalBottom">
          <div class="totalLine">Total (Reference): <span id="stickyTotal">$0</span></div>
          <div class="bottomBtns">
            <a class="btn primary" id="whBtn2" target="_blank" rel="noopener"
               href="https://wa.me/8613485306254?text=Hello%20Luyu%2C%20I%20would%20like%20a%20quote.">
              Shipping / Get Quote
            </a>
            <button class="btn" onclick="closeModal()">Close</button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    /* Tabs scroll */
    const tabs = document.querySelectorAll(".tab");
    tabs.forEach(t=>{
      t.addEventListener("click", ()=>{
        tabs.forEach(x=>x.classList.remove("active"));
        t.classList.add("active");
        const id = t.dataset.target;
        document.getElementById(id).scrollIntoView({behavior:"smooth", block:"start"});
      })
    });

    /* Pricing data (original; will be upgraded in v2) */
    const PRICE = {
      golf: {
        base: { A: 0, B: 0, C: 0, D: 0 },
        seats: [
          { id:"2", label:"2 Seats", add:0 },
          { id:"4", label:"4 Seats", add:0 },
          { id:"6", label:"6 Seats", add:0 },
          { id:"8", label:"8 Seats", add:0 },
        ],
        upgrades: [
          { key:"seat", title:"Seats", items:[
            { id:"seat_std", label:"Standard Seat", add:0 },
            { id:"seat_lux", label:"Luxury Seat Upgrade", add:88 }
          ]},
          { key:"dash", title:"Dashboard", items:[
            { id:"dash_std", label:"Standard Dashboard", add:0 },
            { id:"dash_cp", label:"CarPlay + Rear Camera", add:171 }
          ]},
          { key:"belt", title:"Seat Belts", items:[
            { id:"belt_none", label:"No Belt (Standard)", add:0 },
            { id:"belt_2p", label:"2-Point Belt", add:35 },
            { id:"belt_3p", label:"3-Point Belt", add:40 },
          ]},
          { key:"tire", title:"Tires", items:[
            { id:"tire_10", label:"10-inch Road Tire (Standard)", add:0 },
            { id:"tire_12", label:"12-inch Road Tire Upgrade", add:88 },
            { id:"tire_14", label:"14-inch Off-road Tire Upgrade", add:172 }
          ]},
          { key:"motor", title:"Motor", items:[
            { id:"m35", label:"3.5kW Motor (Standard)", add:0 },
            { id:"m4", label:"4kW Motor Upgrade", add:0 },
            { id:"m5", label:"5kW Motor Upgrade", add:0 }
          ]},
          { key:"cover", title:"Cover", items:[
            { id:"cover_none", label:"No Cover (Standard)", add:0 },
            { id:"cover_full", label:"Full Enclosure Cover", add:45 }
          ]},
          { key:"speaker", title:"Speakers", items:[
            { id:"spk_none", label:"No Speakers (Standard)", add:0 },
            { id:"spk_2set", label:"2-Sets Speakers Upgrade", add:165 }
          ]}
        ],
        options: [
          { id:"wind", label:"Foldable Windshield", add:60 },
          { id:"front_bumper", label:"Front Bumper", add:60 },
          { id:"front_basket", label:"Front Basket", add:50 },
          { id:"bag_holder", label:"Golf Bag Holder", add:50 },
          { id:"bar_audio", label:"Sound Bar", add:100 },
          { id:"roof_light", label:"Search Light", add:25 },
          { id:"led_light", label:"LED Ambient Lights", add:35 },
        ],
        freebies: [
          "Logo design",
          "Free body color customization",
          "Local standard charger",
          "Golf balls",
          "Spare switches & wearable parts"
        ]
      },
      bus: {
        base: { A: 0, B: 0 },
        seats: [
          { id:"8", label:"8 Seats (Standard)", add:0 },
          { id:"11", label:"11 Seats", add:0 },
          { id:"14", label:"14 Seats", add:0 },
          { id:"17", label:"17 Seats", add:0 },
          { id:"20", label:"20 Seats", add:0 },
          { id:"23", label:"23 Seats", add:0 },
        ],
        upgrades: [
          { key:"motor", title:"Motor", items:[
            { id:"m35", label:"3.5kW Motor (Standard)", add:0 },
            { id:"m4", label:"4kW Motor Upgrade", add:0 },
            { id:"m5", label:"5kW Motor Upgrade", add:0 }
          ]},
          { key:"body", title:"Body Type", items:[
            { id:"open", label:"Open Top", add:0 },
            { id:"closed", label:"Fully Enclosed", add:0 }
          ]},
          { key:"tire", title:"Tires", items:[
            { id:"tire_std", label:"Standard Tires", add:0 },
            { id:"tire_12", label:"12-inch Road Tire Upgrade", add:88 },
            { id:"tire_14", label:"14-inch Off-road Tire Upgrade", add:172 }
          ]}
        ],
        freebies: ["(Placeholder) Free items to be added later"]
      }
    };

    let currentType = "golf";
    let currentPkg = "B";

    const state = { seat:null, upgrades:{}, options:new Set() };

    function openModal(type, pkg){
      currentType = type;
      currentPkg = pkg;
      resetChoices(false);

      const titleMap = {
        golf: `EV Golf Cart - Package ${pkg}`,
        bus: `Electric Mini Bus - Package ${pkg}`
      };
      document.getElementById("modalTitle").textContent = titleMap[type] || "Configuration";

      const base = (PRICE[type].base[pkg] ?? 0);
      document.getElementById("basePriceText").textContent = base > 0 ? `From $${base}` : "From $****";

      buildForm(type);

      document.getElementById("modal").classList.add("open");
      document.getElementById("modal").setAttribute("aria-hidden","false");
      document.body.classList.add("modal-open");

      updateTotal();
      const sc = document.getElementById("modalRight");
      sc.scrollTop = 0;
    }

    function closeModal(){
      document.getElementById("modal").classList.remove("open");
      document.getElementById("modal").setAttribute("aria-hidden","true");
      document.body.classList.remove("modal-open");
    }

    document.getElementById("modal").addEventListener("click", (e)=>{
      if(e.target.id === "modal") closeModal();
    });

    function buildForm(type){
      const mount = document.getElementById("formMount");
      mount.innerHTML = "";

      mount.appendChild(makeSingleChoiceGroup(
        "Seat Options (Choose One)",
        PRICE[type].seats,
        (opt)=> { state.seat = opt; updateTotal(); }
      ));

      (PRICE[type].upgrades || []).forEach(g=>{
        mount.appendChild(makeSingleChoiceGroup(
          g.title,
          g.items,
          (opt)=> { state.upgrades[g.key] = opt; updateTotal(); }
        ));
      });

      if(type === "golf"){
        mount.appendChild(makeMultiChoiceGroup(
          "Optional Items (Multi-select)",
          PRICE.golf.options,
          (id, on)=> {
            if(on) state.options.add(id);
            else state.options.delete(id);
            updateTotal();
          }
        ));
        mount.appendChild(makeListGroup("Free Items (Example)", PRICE.golf.freebies));
      }else{
        mount.appendChild(makeListGroup("Free Items (Placeholder)", PRICE.bus.freebies));
      }
    }

    function makeSingleChoiceGroup(title, items, onPick){
      const wrap = document.createElement("div");
      wrap.className = "group";
      wrap.innerHTML = `
        <div class="groupHead">
          <strong>${title}</strong>
          <span class="hint">Single</span>
        </div>
        <div class="options"></div>
      `;
      const box = wrap.querySelector(".options");

      items.forEach((it, idx)=>{
        const row = document.createElement("div");
        row.className = "opt";
        row.innerHTML = `
          <div class="optLeft">
            <div class="optText">
              <b>${it.label}</b>
              <span>Selection affects final quotation</span>
            </div>
          </div>
          <div class="optRight">
            <div class="priceTag">+$${it.add}</div>
            <span class="radio"></span>
          </div>
        `;

        row.addEventListener("click", ()=>{
          box.querySelectorAll(".radio").forEach(r=>r.classList.remove("on"));
          row.querySelector(".radio").classList.add("on");
          onPick({ id: it.id, label: it.label, add: it.add });
        });

        if(idx === 0) setTimeout(()=>row.click(), 0);
        box.appendChild(row);
      });

      return wrap;
    }

    function makeMultiChoiceGroup(title, items, onToggle){
      const wrap = document.createElement("div");
      wrap.className = "group";
      wrap.innerHTML = `
        <div class="groupHead">
          <strong>${title}</strong>
          <span class="hint">Multi</span>
        </div>
        <div class="options"></div>
      `;
      const box = wrap.querySelector(".options");

      items.forEach((it)=>{
        const row = document.createElement("div");
        row.className = "opt";
        row.innerHTML = `
          <div class="optLeft">
            <div class="optText">
              <b>${it.label}</b>
              <span>Selection affects final quotation</span>
            </div>
          </div>
          <div class="optRight">
            <div class="priceTag">+$${it.add}</div>
            <span class="radio"></span>
          </div>
        `;

        row.addEventListener("click", ()=>{
          const r = row.querySelector(".radio");
          const on = !r.classList.contains("on");
          r.classList.toggle("on", on);
          onToggle(it.id, on);
        });

        box.appendChild(row);
      });

      return wrap;
    }

    function makeListGroup(title, items){
      const wrap = document.createElement("div");
      wrap.className = "group";
      wrap.innerHTML = `
        <div class="groupHead">
          <strong>${title}</strong>
          <span class="hint">Text</span>
        </div>
        <div class="options" style="gap:8px;"></div>
      `;
      const box = wrap.querySelector(".options");
      items.forEach(t=>{
        const div = document.createElement("div");
        div.style.cssText = "padding:10px 12px;border:1px dashed #cfeedd;border-radius:14px;background:#fbfffd;color:#274a38;font-weight:700;";
        div.textContent = "• " + t;
        box.appendChild(div);
      });
      return wrap;
    }

    function updateTotal(){
      const type = currentType;
      const base = (PRICE[type].base[currentPkg] ?? 0);

      let total = base;
      if(state.seat) total += Number(state.seat.add||0);

      Object.values(state.upgrades).forEach(u=> total += Number((u&&u.add)||0));

      if(type === "golf"){
        PRICE.golf.options.forEach(o=>{
          if(state.options.has(o.id)) total += Number(o.add||0);
        });
      }

      const show = `$${total}`;
      document.getElementById("totalPriceText").textContent = show;
      document.getElementById("stickyTotal").textContent = show;

      const msg = buildWhatsAppMessage(type, base, total);
      const url = "https://wa.me/8613485306254?text=" + encodeURIComponent(msg);
      document.getElementById("whBtn").href = url;
      document.getElementById("whBtn2").href = url;
    }

    function buildWhatsAppMessage(type, base, total){
      const title = (type === "golf")
        ? `EV Golf Cart - Package ${currentPkg}`
        : `Electric Mini Bus - Package ${currentPkg}`;

      const lines = [];
      lines.push(`Hello Luyu, I would like a quote.`);
      lines.push(`Product: ${title}`);
      lines.push(`Base price: ${base>0?("$"+base):"$****"} (reference)`);
      if(state.seat) lines.push(`Seat: ${state.seat.label} (+$${state.seat.add})`);

      Object.entries(state.upgrades).forEach(([k,v])=>{
        if(v) lines.push(`Upgrade (${k}): ${v.label} (+$${v.add})`);
      });

      if(type === "golf" && state.options.size){
        lines.push(`Optional items:`);
        PRICE.golf.options.forEach(o=>{
          if(state.options.has(o.id)) lines.push(`- ${o.label} (+$${o.add})`);
        });
      }

      lines.push(`Estimated total: $${total} (reference)`);
      lines.push(`Please advise shipping and final quotation.`);
      return lines.join("\n");
    }

    function resetChoices(recalc=true){
      state.seat = null;
      state.upgrades = {};
      state.options = new Set();
      if(recalc) updateTotal();
    }

    if(location.hash){
      const id = location.hash.replace("#","");
      const el = document.getElementById(id);
      if(el) setTimeout(()=>el.scrollIntoView({behavior:"smooth"}), 100);
    }
  </script>
</body>
</html>
